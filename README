How to use the new build system
===============================
There's a great document at:

http://www.uv-ac.de/opiedev/opiedev.html

and the API is at:
http://handhelds.org/~zecke/apidocs/index.html


You will need qvfb, designer, and uic from a qt-x11-2.3.2 package. 
That means you must download and configure/make it.
wget ftp://ftp.trolltech.com/qt/source/qt-x11-2.3.2.tar.gz


Qt embedded is available at: 
ftp://ftp.trolltech.com/qt/source/qt-embedded-2.3.7.tar.bz2
or in that directory.

Set QTDIR to point to your qt/embedded source tree, such as:

export QTDIR=/opt/qt-2.3.7

Then you need to do 
export OPIEDIR=`pwd`
or 
export OPIEDIR=~/projects/sources/opie
or where ever you placed Opie sources.

and then do:
export LD_LIBRARY_PATH=$OPIEDIR/lib:$QTDIR/lib:$LD_LIBRARY_PATH

You will want to apply the patches in the $OPIEDIR/qt directory to qt-embedded-2.3.7

qte234-for-opie091-gfxraster.patch
qte234-for-opie091-listview.patch
qte234-for-opie091-override.patch
qte234-for-opie091-qtoolbutton.patch
qte234-for-opie091-setpalette.patch
qte234-for-opie091-sigsegv.patch
qte234-for-opie091-style.patch
qte234-for-opie091-unpolish.patch

*NOTE* You can skip the qte234-for-opie091-simpad.patch
patch, unless you are compiling for simpad. 

cd $QTDIR; cat $OPIEDIR/qt/qte234*.patch | patch -p0


Now Qt Embedded is patched and ready to go! You are ready to configure and make qt embedded.

I run this script to configure qte
------------------- start script
#!/bin/bash
## this file is for easy configuring of qt embedded for Qtopia development, on x86

configure_make () {
    if configure_qt; then
	make;
	else exit -1
fi
}

configure_qt () {
    cd $QTDIR;
 echo 'yes' | ./configure -qconfig qpe -depths 4,16,24,32 -system-jpeg -system-libpng -system-zlib -no-xft -qvfb;

}

# default configuration of Qt embedded for Opie
echo "Configuring Qt Embedded for Opie development....";
if [ ! -e $QTDIR/src/tools/qconfig-qpe.h ]; then
    cp $OPIEDIR/qt/qconfig-qpe.h $QTDIR/src/tools
fi

configure_make;


------------------- end script

Once you have these compiled, be sure to set the PATH to ensure your (cross)compiler 
is available.

Then do the following in the opie source tree:

make clean
make menuconfig

Now you can move through the menu and select or deselect anything..
Exit and save the configuration and enter "make" to create opie...

Have fun with it !

If you get into trouble there are other make's

make clean-configs
is a useful one.



Ciao, Stefan
and ljp <lpotter@trolltech.com>
